import{i as T,j as e,a7 as L,B as o,F as W,T as i,I as k,C as v,P,z,r,a8 as Q,a9 as O,d as U,a0 as J,S as q,L as D,H as X,x as G,J as Y}from"./index-_IwMgO9w.js";import{I as _}from"./Input-C9VLMywm.js";import{T as $,a as A}from"./Tabs-TXamPSyv.js";import{L as K}from"./ListItemAvatar-vXF5_eJa.js";const re=T(e.jsx("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"})),N=({open:l,onClose:a,title:t,maxWidth:p="sm",children:n,sx:c,variant:d="standard"})=>d==="simple"?e.jsx(L,{open:l,onClose:a,sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(o,{sx:{width:"100%",maxWidth:"600px",outline:"none",...c},children:n})}):e.jsx(W,{in:l,timeout:300,children:e.jsx(o,{sx:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1300,backdropFilter:"blur(4px)"},onClick:a,children:e.jsxs(o,{sx:{position:"relative",width:"35%",minWidth:"300px",maxWidth:{xs:"90%",sm:"350px",md:"400px",lg:"450px",xl:"500px"}[p],maxHeight:"82vh",bgcolor:"rgba(30, 30, 47, 0.95)",backdropFilter:"blur(10px)",borderRadius:"12px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.2)",display:"flex",flexDirection:"column",overflow:"hidden",margin:"auto",padding:"16px",...c},onClick:u=>u.stopPropagation(),children:[t&&e.jsxs(o,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",p:1,borderBottom:"1px solid rgba(255,255,255,0.1)",marginBottom:"16px"},children:[e.jsx(i,{variant:"h6",sx:{color:"#fff",fontWeight:700,fontSize:"1.2rem"},children:t}),e.jsx(k,{onClick:a,sx:{color:"#fff","&:hover":{backgroundColor:"rgba(255,255,255,0.1)"}},children:e.jsx(v,{})})]}),e.jsx(o,{sx:{p:2,overflowY:"auto"},children:n})]})})}),V=({open:l,onClose:a,hub:t,onSearchClose:p})=>{const n=()=>{p()};return e.jsx(N,{open:l,onClose:a,children:e.jsxs(P,{sx:{position:"relative",width:"100%",maxWidth:"500px",bgcolor:"background.paper",borderRadius:2,p:3},children:[e.jsx(k,{onClick:a,sx:{position:"absolute",right:8,top:8,color:"text.secondary"},children:e.jsx(v,{})}),e.jsxs(z,{spacing:3,children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:2},children:[t.avatar&&e.jsx(o,{component:"img",src:t.avatar,alt:t.name,sx:{width:64,height:64,borderRadius:"50%",objectFit:"cover"}}),e.jsxs(o,{children:[e.jsx(i,{variant:"h6",component:"h2",children:t.name}),t.description&&e.jsx(i,{variant:"body2",color:"text.secondary",children:t.description})]})]}),e.jsxs(o,{sx:{display:"flex",justifyContent:"flex-end",gap:1},children:[e.jsx(k,{onClick:a,sx:{color:"text.secondary","&:hover":{color:"text.primary"}},children:e.jsx(v,{})}),e.jsx(Button,{onClick:n,variant:"contained",sx:{background:"linear-gradient(90deg, #FF69B4 0%, #1E90FF 100%)",color:"#fff",fontWeight:"bold","&:hover":{background:"linear-gradient(90deg, #FF1493 0%, #00BFFF 100%)"}},children:"Join Hub"})]})]})]})})},ae=({open:l,onClose:a})=>{const[t,p]=r.useState(0),[n,c]=r.useState([]),[d,u]=r.useState(""),[h,S]=r.useState(""),[x,b]=r.useState(0),[f,C]=r.useState(null),g=r.useRef(null),m=r.useCallback(Q.debounce(s=>{S(s),b(0),c([])},500),[]);r.useEffect(()=>(m(d),()=>{m.cancel()}),[d,m]);const{data:j,isFetching:w}=O(h.trim(),{skip:!h.trim()||t!==0,refetchOnMountOrArgChange:!1}),{data:y,isFetching:E}=U({name:h.trim(),page:x,size:20,sort:"createdAt,desc"},{skip:!h.trim()||t!==1,refetchOnMountOrArgChange:!1}),F=r.useCallback(()=>{if(!g.current)return;const{scrollTop:s,scrollHeight:B,clientHeight:R}=g.current;B-s<=R+100&&b(M=>M+1)},[]);r.useEffect(()=>{const s=g.current;if(s)return s.addEventListener("scroll",F),()=>s.removeEventListener("scroll",F)},[F]),r.useEffect(()=>{c(t===0?s=>x===0?j||[]:[...s,...j||[]]:s=>x===0?y||[]:[...s,...y||[]])},[t,j,y,x]);const I=t===0?w:E,H=s=>{C(s)};return e.jsxs(e.Fragment,{children:[e.jsxs(J,{open:l,onClose:a,title:"Поиск",children:[e.jsxs($,{value:t,onChange:(s,B)=>{p(B),c([]),u(""),S(""),b(0)},centered:!0,sx:{mb:3,"& .MuiTabs-indicator":{display:"none"},"& .MuiTab-root":{position:"relative","&::after":{content:'""',position:"absolute",bottom:0,left:0,right:0,height:"3px",background:"linear-gradient(90deg, #FF69B4 0%, #1E90FF 100%)",opacity:0,transition:"opacity 0.3s ease, transform 0.3s ease",transform:"scaleX(0)"},"&.Mui-selected::after":{opacity:1,transform:"scaleX(1)"}}},children:[e.jsx(A,{label:"Пользователи",sx:{color:t===0?"#FF69B4":"#B0B0B0",fontWeight:700}}),e.jsx(A,{label:"Хабы",sx:{color:t===1?"#1E90FF":"#B0B0B0",fontWeight:700}})]}),e.jsx(_,{name:"query",placeholder:t===0?"Введите логин пользователя...":"Введите название хаба...",value:d,onChange:s=>u(s.target.value),InputProps:{startAdornment:e.jsx(q,{sx:{color:t===0?"#FF69B4":"#1E90FF",mr:1}})}}),I&&x===0?e.jsx(i,{sx:{color:"#B0B0B0",textAlign:"center",mt:3},children:"Поиск..."}):n.length>0?e.jsxs(D,{ref:g,sx:{maxHeight:"400px",overflow:"auto","&::-webkit-scrollbar":{width:"8px"},"&::-webkit-scrollbar-track":{background:"rgba(255,255,255,0.1)",borderRadius:"4px"},"&::-webkit-scrollbar-thumb":{background:"rgba(255,255,255,0.2)",borderRadius:"4px","&:hover":{background:"rgba(255,255,255,0.3)"}}},children:[n.map(s=>e.jsx(X,{onClick:()=>t===1&&H(s),sx:{display:"flex",alignItems:"center","&:hover":{background:"rgba(255,255,255,0.05)",borderRadius:1},cursor:"pointer",transition:"all 0.2s ease"},children:e.jsxs(o,{sx:{display:"flex",alignItems:"center",width:"100%"},children:[e.jsx(K,{children:e.jsx(G,{src:s.avatar,sx:{bgcolor:t===0?"rgba(255,105,180,0.2)":"rgba(30,144,255,0.2)",color:t===0?"#FF69B4":"#1E90FF"},children:t===0?s.login.charAt(0).toUpperCase():s.name.charAt(0).toUpperCase()})}),e.jsx(Y,{primary:t===0?s.login:s.name,primaryTypographyProps:{sx:{color:"#fff",fontWeight:500}},secondary:t===0?s.status||"":String(s.type)==="0"?"Приватный":"Публичный",secondaryTypographyProps:{sx:{color:"#B0B0B0",fontSize:"0.75rem"}}})]})},s.id)),I&&x>0&&e.jsx(i,{sx:{color:"#B0B0B0",textAlign:"center",py:2},children:"Загрузка..."})]}):d?e.jsx(i,{sx:{color:"#B0B0B0",textAlign:"center",mt:3},children:"Ничего не найдено"}):e.jsx(i,{sx:{color:"#B0B0B0",textAlign:"center",mt:3},children:t===0?"Введите логин пользователя для поиска":"Введите название хаба для поиска"})]}),f&&e.jsx(V,{open:!!f,onClose:()=>C(null),hub:f,onSearchClose:a})]})};export{N as A,re as S,ae as a};
